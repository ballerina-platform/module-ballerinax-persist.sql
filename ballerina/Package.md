# Module Overview

This module provides relation database support for the `bal persist` feature, which provides functionality to store and query data from a relational database conveniently through a data model instead of using SQL query language.

Currently, this package supports MySQL, MSSQL, PostgreSQL as the relational database. However, we are also planning to add support for other relational databases such as Oracle.

The MySQL, MSSQL, PostgreSQL data stores are relational database management systems that stores data in tables. None of these data stores is the default data store for the `bal persist` feature. Therefore, you need to explicitly specify the data store when initializing `bal persist` in your application. as follows,

```
$ bal persist init --datastore mysql
$ bal persist init --datastore mssql
$ bal persist init --datastore postgresql
```

## Supported Ballerina Types
The following table lists the Ballerina types supported by the MySQL data store and the corresponding SQL types used to store the data in the database.

|  Ballerina Type  |    SQL Type     |
|:----------------:|:---------------:|
|       int        |       INT       |
|      float       |     DOUBLE      |
|     decimal      | DECIMAL(65,30)  |
|      string      |  VARCHAR(191)   |
|     boolean      |     BOOLEAN     |
|      byte[]      |    LONGBLOB     |
|        ()        |      NULL       |
|    time:Date     |      DATE       |
|  time:TimeOfDay  |      TIME       |
|     time:Utc     |    TIMESTAMP    |
|    time:Civil    |    DATETIME     |
|       enum       |      ENUM       |

If you want to map a Ballerina type to a different SQL type or want to change the default length of a SQL type, you can change it in the `script.sql` file generated by the `bal persist generate` command before executing the script.

## Configuration
You need to set values for the following basic configuration parameters in the `Config.toml` file in your project to use the MySQL data store.

| Parameter  |             Description              |
|:----------:|:------------------------------------:|
|    host    |    The hostname of the DB server.    |
|    port    |      The port of the DB server.      |
|  username  |    The username of the DB server.    |
|  password  |    The password of the DB server.    |
|  database  | The name of the database to be used. |

The following is a sample `Config.toml` file with the MySQL data store configuration. This is generated by the `bal persist generate` command.

```toml
[<packageName>.<moduleName>]
host = "localhost"
port = 3306
user = "root"
password = ""
database = ""
```

Additionally, you can set values for advanced configuration parameters in the `Config.toml` file in your project to use the data store. Please refer to the individual connection documentation for more information on these parameters.
- [MySQL Connector documentation](https://lib.ballerina.io/ballerinax/mysql/latest)
- [MSSQL Connector documentation](https://lib.ballerina.io/ballerinax/mssql/latest)
- [PostgreSQL Connector documentation](https://lib.ballerina.io/ballerinax/postgresql/latest)

## How to Setup

### Set up a MySQL/MSSQL/PostgreSQL server instance
Select one of the methods below to set up a DB server.

> Tip: Keep the connection and authentication details for connecting to the DB server including the hostname, port, username, and password noted down.

* Install a DB server on your machine locally by downloading and installing the server software for different platforms.
* Use a cross-platform web-server solution such as XAMPP or WampServer.
* Use Docker to create a DB server deployment.
* Use a cloud-based DB solution such as Google’s CloudSQL, Amazon’s RDS, or Microsoft’s Azure Database.

### Run the script to create the database and tables

The `bal persist generate` command generates a script.sql file in the generated directory of your project. This file contains the SQL script to create the tables required for your application. You need to run this script to create the database and tables in the DB server using a DB client or a command line client.

## Report issues

To report bugs, request new features, start new discussions, view project boards, etc., go to the [Ballerina standard library parent repository](https://github.com/ballerina-platform/ballerina-standard-library).

## Useful links
- Chat live with us via our [Discord server](https://discord.gg/ballerinalang).
- Post all technical questions on Stack Overflow with the [#ballerina](https://stackoverflow.com/questions/tagged/ballerina) tag.